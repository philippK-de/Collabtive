closeEndcolor="#377814";deleteEndcolor="#c62424";function change(a,b){new Ajax.Updater({success:b},a,{method:"get",evalScripts:!0})}function changeshow(a,b,c){new Ajax.Updater({success:b},a,{method:"get",evalScripts:!0,onCreate:startWait(c)})}function changePost(a,b,c){new Ajax.Updater({success:b},a,{method:"post",postBody:c,evalScripts:!0})}function fetchData(a){}
function deleteElement(a,b,c){new Ajax.Request(b,{method:"get",onSuccess:function(b){"ok"==b.responseText&&(removeRow(a,deleteEndcolor),void 0!=c&&updateView(c))}});try{systemMsg("deleted")}catch(d){}}function closeElement(a,b,c){new Ajax.Request(b,{method:"get",onSuccess:function(b){"ok"==b.responseText&&(removeRow(a,closeEndcolor),void 0!=c&&updateView(c))}});try{systemMsg("closed")}catch(d){}}
function recolorRows(a){a=a.options.rowid;try{var b=$(a).parentNode,c=[];$$("#"+b.id+" tbody:not([id="+a+"])").each(function(a){"none"!=a.style.display&&c.push(a)});for(b=0;b<c.length;b++)0==b%2?$(c[b].id).className="color-a":$(c[b].id).className="color-b"}catch(d){}}function removeRow(a,b){new Effect.Highlight(a,{duration:1.5,startcolor:"#FFFFFF",endcolor:b});new Effect.Fade(a,{duration:1.5,rowid:a,afterFinish:recolorRows})}
function make_inputs(a){change("manageajax.php?action=makeinputs&num="+a,"inputs")}function show_addtask(a){Effect.BlindDown(a)}function blindtoggle(a){new Effect.toggle(a,"blind",{duration:.5})}function fadeToggle(a){new Effect.toggle(a,"appear")}
function toggleBlock(a){var b=$(a).style.display;if("none"==b)setCookie(a,"1","30","/","",""),$(a).style.display="block",$(a+"_toggle").className="win_block";else if("block"==b||""==b)setCookie(a,"0","30","/","",""),$(a).style.display="none",$(a+"_toggle").className="win_none"}function switchClass(a,b,c){try{$($("selectedid").value).className=c}catch(d){}try{$("selectedid").value=a,$($("selectedid").value).className=b}catch(f){}}
function toggleClass(a,b,c){$(a).hasClassName(b)?$(a).className=c:$(a).className=b}function toggleAccordeon(a,b){$$("#"+a+" tbody span[class='acc-toggle-active']").each(function(a){a!=b&&(a.className="acc-toggle")});b.hasClassName("acc-toggle")?b.className="acc-toggle-active":b.className="acc-toggle"}function changeElements(a,b){for(var c=$$(a),d=0;d<c.length;d++)c[d].className=b}function makeTimer(a,b){window.setTimeout(a,b)}
function confirmit(a,b){check=confirm(a);b=decodeURI(b);1==check&&(window.location=b)}function confirmfunction(a,b){1==confirm(a)&&eval(b)}function confirmDelete(a,b,c,d){1==confirm(a)&&deleteElement(b,c,d)}function selectFolder(a){var b=$("folderparent").options;for(i=0;i<b.length;i++)b[i].value==a&&(b[i].selected="selected");b=$("upfolder").options;for(i=0;i<b.length;i++)b[i].value==a&&(b[i].selected="selected")}
function setCookie(a,b,c,d,f,g){var e=new Date;e.setTime(e.getTime());c&&(c*=864E5);e=new Date(e.getTime()+c);document.cookie=a+"="+escape(b)+(c?";expires="+e.toGMTString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(g?";secure":"")}function readCookie(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}
function getnow(a){var b=new Date,c=b.getHours(),b=b.getMinutes();10>c&&(c="0"+c);10>b&&(b="0"+b);$(a).value=c+":"+b}function calctime(){var a=new Date,b=a.getHours(),c=a.getMinutes(),a=a.getSeconds();10>b&&(b="0"+b);10>c&&(c="0"+c);10>a&&(a="0"+a);$("digitalclock").innerHTML=b+":"+c+":"+a;setTimeout("calctime()",1E3)}function systemMsg(a){new Effect.Appear(a,{duration:2});makeTimer("new Effect.Fade('"+a+"', { duration: 2.0 })",5E3)}function addEngine(a){window.external.AddSearchProvider(a)}
function sortit(){}
function sortBlock(a,b){var c=$$("#"+a+" tbody");theParent=$(a).parentNode;for(i=0;i<c.length;i++)titleArr=c[i].getAttribute("rel").split(","),c[i].setAttribute("theid",Number(titleArr[0])),c[i].setAttribute("title",titleArr[1]),c[i].setAttribute("daysleft",titleArr[2]),c[i].setAttribute("project",titleArr[3]),c[i].setAttribute("theuser",titleArr[4]),c[i].setAttribute("done",titleArr[5]),"asc"==c[i].getAttribute("sortorder")?c[i].setAttribute("sortorder","desc"):c[i].setAttribute("sortorder","asc"),
$(a).removeChild(c[i]);"daysleft"==b?c.sort(daysort):"done"==b?c.sort(done):"project"==b?c.sort(sortByProject):"byuser"==b?c.sort(sortByUser):c.sort(sortByTitle);for(i=0;i<c.length;i++){var d=$(a).appendChild(c[i]);0==i%2?d.setAttribute("class","color-a"):d.setAttribute("class","color-b");$(a+"toggle"+c[i].getAttribute("theid")).setAttribute("onclick","javascript:accord_tasks.activate($$('#'+theParent.id+' .accordion_toggle')["+i+"]);toggleAccordeon(theParent.id,this);")}}
function done(a,b){var c=a.getAttribute("done"),d=b.getAttribute("done");return"asc"==b.getAttribute("sortorder")?d-c:c-d}function daysort(a,b){var c=a.getAttribute("daysleft"),d=b.getAttribute("daysleft");return"asc"==b.getAttribute("sortorder")?d-c:c-d}function sortByTitle(a,b){var c=a.title.toLowerCase(),d=b.title.toLowerCase();return"asc"==b.getAttribute("sortorder")?c<d?-1:c>d?1:0:c>d?-1:c<d?1:0}
function sortByProject(a,b){var c=a.getAttribute("project"),d=b.getAttribute("project");return"asc"==b.getAttribute("sortorder")?c<d?-1:c>d?1:0:c>d?-1:c<d?1:0}function sortByUser(a,b){var c=a.getAttribute("theuser"),d=b.getAttribute("theuser");return"asc"==b.getAttribute("sortorder")?c<d?-1:c>d?1:0:c>d?-1:c<d?1:0}function sortByDays(a,b){var c=a.getAttribute("daysleft"),d=b.getAttribute("daysleft");return"asc"==b.getAttribute("sortorder")?c<d?-1:c>d?1:0:c>d?-1:c<d?1:0}var accordion=Class.create();
accordion.prototype={showAccordion:null,currentAccordion:null,duration:null,effects:[],animating:!1,initialize:function(a,b){if(!$(a))throw a+" doesn't exist!";this.options=Object.extend({resizeSpeed:8,bindOnclickHandler:!0,classNames:{toggle:"accordion_toggle",toggleActive:"accordion_toggle_active",content:"accordion_content"},defaultSize:{height:null,width:null},direction:"vertical",onEvent:"click"},b||{});this.duration=.4;$$("#"+a+" ."+this.options.classNames.toggle).each(function(a){Event.observe(a,
this.options.onEvent,this.activate.bind(this,a),!1);"click"==this.options.onEvent&&1==this.options.bindOnclickHandler&&(a.onclick=function(){return!1});var b="horizontal"==this.options.direction?{width:"0px",display:"none"}:{height:"0px",display:"none"};this.currentAccordion=$(a.next(0)).setStyle(b)}.bind(this))},activate:function(a){if(this.animating)return!1;this.effects=[];this.currentAccordion=$(a.next(0));this.currentAccordion.setStyle({display:"block"});this.currentAccordion.previous(0).addClassName(this.options.classNames.toggleActive);
this.scaling="horizontal"==this.options.direction?$H({scaleX:!0,scaleY:!1}):$H({scaleX:!1,scaleY:!0});this.currentAccordion==this.showAccordion?this.deactivate():this._handleAccordion()},deactivate:function(){var a=$H({duration:this.duration,scaleContent:!1,transition:Effect.Transitions.sinoidal,queue:{position:"end",scope:"accordionAnimation"},scaleMode:{originalHeight:this.options.defaultSize.height?this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?
this.options.defaultSize.width:this.currentAccordion.scrollWidth},afterFinish:function(){this.showAccordion.setStyle({height:"auto",display:"none"});this.showAccordion=null;this.animating=!1}.bind(this)});this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive);new Effect.Scale(this.showAccordion,0,a.update(this.scaling).toObject())},_handleAccordion:function(){var a=$H({sync:!0,scaleFrom:0,scaleContent:!1,transition:Effect.Transitions.sinoidal,scaleMode:{originalHeight:this.options.defaultSize.height?
this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?this.options.defaultSize.width:this.currentAccordion.scrollWidth}});a.merge(this.scaling);this.effects.push(new Effect.Scale(this.currentAccordion,100,a.update(this.scaling).toObject()));this.showAccordion&&(this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive),a=$H({sync:!0,scaleContent:!1,transition:Effect.Transitions.sinoidal}),a.merge(this.scaling),this.effects.push(new Effect.Scale(this.showAccordion,
0,a.update(this.scaling).toObject())));new Effect.Parallel(this.effects,{duration:this.duration,queue:{position:"end",scope:"accordionAnimation"},beforeStart:function(){this.animating=!0}.bind(this),afterFinish:function(){this.showAccordion&&this.showAccordion.setStyle({display:"none"});$(this.currentAccordion).setStyle({height:"auto"});this.showAccordion=this.currentAccordion;this.animating=!1}.bind(this)})}};"undefined"==typeof Control&&(Control={});Control.Modal=Class.create();
Object.extend(Control.Modal,{loaded:!1,loading:!1,loadingTimeout:!1,overlay:!1,container:!1,current:!1,ie:!1,effects:{containerFade:!1,containerAppear:!1,overlayFade:!1,overlayAppear:!1},targetRegexp:/#(.+)$/,imgRegexp:/\.(jpe?g|gif|png|tiff?)$/,overlayStyles:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},overlayIEStyles:{position:"absolute",top:0,left:0,zIndex:9998},disableHoverClose:!1,load:function(){if(!Control.Modal.loaded){Control.Modal.loaded=!0;Control.Modal.ie="undefined"==
typeof document.body.style.maxHeight;Control.Modal.overlay=$(document.createElement("div"));Control.Modal.overlay.id="modal_overlay";Object.extend(Control.Modal.overlay.style,Control.Modal["overlay"+(Control.Modal.ie?"IE":"")+"Styles"]);Control.Modal.overlay.hide();Control.Modal.container=$(document.createElement("div"));Control.Modal.container.id="modal_container";Control.Modal.container.hide();Control.Modal.loading=$(document.createElement("div"));Control.Modal.loading.id="modal_loading";Control.Modal.loading.hide();
var a=document.getElementsByTagName("body")[0];a.appendChild(Control.Modal.overlay);a.appendChild(Control.Modal.container);a.appendChild(Control.Modal.loading);Control.Modal.container.observe("mouseout",function(a){!Control.Modal.disableHoverClose&&Control.Modal.current&&Control.Modal.current.options.hover&&!Position.within(Control.Modal.container,Event.pointerX(a),Event.pointerY(a))&&Control.Modal.close()})}},open:function(a,b){b=b||{};b.contents||(b.contents=a);var c=new Control.Modal(!1,b);c.open();
return c},close:function(a){"boolean"!=typeof a&&(a=!1);Control.Modal.current&&Control.Modal.current.close(a)},attachEvents:function(){Event.observe(window,"load",Control.Modal.load);Event.observe(window,"unload",Event.unloadCache,!1)},center:function(a){a._absolutized||(a.setStyle({position:"absolute"}),a._absolutized=!0);var b=a.getDimensions();Position.prepare();var c=Position.deltaX+Math.floor((Control.Modal.getWindowWidth()-b.width)/2),d=Position.deltaY+(Control.Modal.getWindowHeight()>b.height?
Math.floor((Control.Modal.getWindowHeight()-b.height)/2):0);a.setStyle({top:b.height<=Control.Modal.getDocumentHeight()?(null!=d&&0<d?d:"0")+"px":0,left:b.width<=Control.Modal.getDocumentWidth()?(null!=c&&0<c?c:"0")+"px":0})},getWindowWidth:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},getWindowHeight:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},getDocumentWidth:function(){return Math.min(document.body.scrollWidth,
Control.Modal.getWindowWidth())},getDocumentHeight:function(){return Math.max(document.body.scrollHeight,Control.Modal.getWindowHeight())},onKeyDown:function(a){a.keyCode==Event.KEY_ESC&&Control.Modal.close()}});
Object.extend(Control.Modal.prototype,{mode:"",html:!1,href:"",element:!1,src:!1,imageLoaded:!1,ajaxRequest:!1,initialize:function(a,b){this.element=$(a);this.options={beforeOpen:Prototype.emptyFunction,afterOpen:Prototype.emptyFunction,beforeClose:Prototype.emptyFunction,afterClose:Prototype.emptyFunction,onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,onException:Prototype.emptyFunction,beforeImageLoad:Prototype.emptyFunction,afterImageLoad:Prototype.emptyFunction,autoOpenIfLinked:!0,
contents:!1,loading:!1,fade:!1,fadeDuration:.75,image:!1,imageCloseOnClick:!0,hover:!1,iframe:!1,iframeTemplate:new Template('<iframe src="#{href}" width="100%" height="100%" frameborder="0" id="#{id}"></iframe>'),evalScripts:!0,requestOptions:{},overlayDisplay:!0,overlayClassName:"",overlayCloseOnClick:!0,containerClassName:"",opacity:.3,zIndex:1E3,width:null,height:null,offsetLeft:0,offsetTop:0,position:"absolute"};Object.extend(this.options,b||{});var c=!1,d=!1;this.element&&(c=Control.Modal.targetRegexp.exec(this.element.href),
d=Control.Modal.imgRegexp.exec(this.element.href));"mouse"==this.options.position&&(this.options.hover=!0);this.options.contents?this.mode="contents":this.options.image||d?(this.mode="image",this.src=this.element.href):c?(this.mode="named",d=$(c[1]),this.html=d.innerHTML,d.remove(),this.href=c[1]):(this.mode=this.options.iframe?"iframe":"ajax",this.href=this.element.href);this.element&&(this.options.hover?(this.element.observe("mouseover",this.open.bind(this)),this.element.observe("mouseout",function(a){Position.within(Control.Modal.container,
Event.pointerX(a),Event.pointerY(a))||this.close()}.bindAsEventListener(this))):this.element.onclick=function(a){this.open();Event.stop(a);return!1}.bindAsEventListener(this));c=Control.Modal.targetRegexp.exec(window.location);this.position=function(a){"absolute"==this.options.position?Control.Modal.center(Control.Modal.container):(a=a&&"mouse"==this.options.position?[Event.pointerX(a),Event.pointerY(a)]:Position.cumulativeOffset(this.element),Control.Modal.container.setStyle({position:"absolute",
top:a[1]+("function"==typeof this.options.offsetTop?this.options.offsetTop():this.options.offsetTop)+"px",left:a[0]+("function"==typeof this.options.offsetLeft?this.options.offsetLeft():this.options.offsetLeft)+"px"}));Control.Modal.ie&&Control.Modal.overlay.setStyle({height:Control.Modal.getDocumentHeight()+"px",width:Control.Modal.getDocumentWidth()+"px"})}.bind(this);"named"==this.mode&&this.options.autoOpenIfLinked&&c&&c[1]&&c[1]==this.href&&this.open()},showLoadingIndicator:function(){this.options.loading&&
(Control.Modal.loadingTimeout=window.setTimeout(function(){var a=$("modal_image");a&&a.hide();Control.Modal.loading.style.zIndex=this.options.zIndex+1;Control.Modal.loading.update('<img id="modal_loading" src="'+this.options.loading+'"/>');Control.Modal.loading.show();Control.Modal.center(Control.Modal.loading)}.bind(this),250))},hideLoadingIndicator:function(){if(this.options.loading){Control.Modal.loadingTimeout&&window.clearTimeout(Control.Modal.loadingTimeout);var a=$("modal_image");a&&a.show();
Control.Modal.loading.hide()}},open:function(a){if(a||!1!==this.notify("beforeOpen")){Control.Modal.loaded||Control.Modal.load();Control.Modal.close();this.options.hover||Event.observe($(document.getElementsByTagName("body")[0]),"keydown",Control.Modal.onKeyDown);Control.Modal.current=this;this.options.hover||Control.Modal.overlay.setStyle({zIndex:this.options.zIndex,opacity:this.options.opacity});Control.Modal.container.setStyle({zIndex:this.options.zIndex+1,width:this.options.width?("function"==
typeof this.options.width?this.options.width():this.options.width)+"px":null,height:this.options.height?("function"==typeof this.options.height?this.options.height():this.options.height)+"px":null});Control.Modal.ie&&!this.options.hover&&$A(document.getElementsByTagName("select")).each(function(a){a.style.visibility="hidden"});Control.Modal.overlay.addClassName(this.options.overlayClassName);Control.Modal.container.addClassName(this.options.containerClassName);switch(this.mode){case "image":this.imageLoaded=
!1;this.notify("beforeImageLoad");this.showLoadingIndicator();a=document.createElement("img");a.onload=function(a){this.hideLoadingIndicator();this.update([a]);this.options.imageCloseOnClick&&$(a).observe("click",Control.Modal.close);this.position();this.notify("afterImageLoad");a.onload=null}.bind(this,a);a.src=this.src;a.id="modal_image";break;case "ajax":this.notify("beforeLoad");a={method:"post",onSuccess:function(a){this.hideLoadingIndicator();this.update(a.responseText);this.notify("onSuccess",
a);this.ajaxRequest=!1}.bind(this),onFailure:function(){this.notify("onFailure")}.bind(this),onException:function(){this.notify("onException")}.bind(this)};Object.extend(a,this.options.requestOptions);this.showLoadingIndicator();this.ajaxRequest=new Ajax.Request(this.href,a);break;case "iframe":this.update(this.options.iframeTemplate.evaluate({href:this.href,id:"modal_iframe"}));break;case "contents":this.update("function"==typeof this.options.contents?this.options.contents():this.options.contents);
break;case "named":this.update(this.html)}this.options.hover||(this.options.overlayCloseOnClick&&this.options.overlayDisplay&&Control.Modal.overlay.observe("click",Control.Modal.close),this.options.overlayDisplay&&(this.options.fade?(Control.Modal.effects.overlayFade&&Control.Modal.effects.overlayFade.cancel(),Control.Modal.effects.overlayAppear=new Effect.Appear(Control.Modal.overlay,{queue:{position:"front",scope:"Control.Modal"},to:this.options.opacity,duration:this.options.fadeDuration/2})):Control.Modal.overlay.show()));
"mouse"==this.options.position&&(this.mouseHoverListener=this.position.bindAsEventListener(this),this.element.observe("mousemove",this.mouseHoverListener));this.notify("afterOpen")}},update:function(a){"string"==typeof a?Control.Modal.container.update(a):(Control.Modal.container.update(""),a.each?a.each(function(a){Control.Modal.container.appendChild(a)}):Control.Modal.container.appendChild(node));this.options.fade?(Control.Modal.effects.containerFade&&Control.Modal.effects.containerFade.cancel(),
Control.Modal.effects.containerAppear=new Effect.Appear(Control.Modal.container,{queue:{position:"end",scope:"Control.Modal"},to:1,duration:this.options.fadeDuration/2})):Control.Modal.container.show();this.position();Event.observe(window,"resize",this.position,!1);Event.observe(window,"scroll",this.position,!1)},close:function(a){if(a||!1!==this.notify("beforeClose"))this.ajaxRequest&&this.ajaxRequest.transport.abort(),this.hideLoadingIndicator(),"image"==this.mode&&(a=$("modal_image"),this.options.imageCloseOnClick&&
a&&a.stopObserving("click",Control.Modal.close)),Control.Modal.ie&&!this.options.hover&&$A(document.getElementsByTagName("select")).each(function(a){a.style.visibility="visible"}),this.options.hover||Event.stopObserving(window,"keyup",Control.Modal.onKeyDown),Control.Modal.current=!1,Event.stopObserving(window,"resize",this.position,!1),Event.stopObserving(window,"scroll",this.position,!1),this.options.hover||(this.options.overlayCloseOnClick&&this.options.overlayDisplay&&Control.Modal.overlay.stopObserving("click",
Control.Modal.close),this.options.overlayDisplay&&(this.options.fade?(Control.Modal.effects.overlayAppear&&Control.Modal.effects.overlayAppear.cancel(),Control.Modal.effects.overlayFade=new Effect.Fade(Control.Modal.overlay,{queue:{position:"end",scope:"Control.Modal"},from:this.options.opacity,to:0,duration:this.options.fadeDuration/2})):Control.Modal.overlay.hide())),this.options.fade?(Control.Modal.effects.containerAppear&&Control.Modal.effects.containerAppear.cancel(),Control.Modal.effects.containerFade=
new Effect.Fade(Control.Modal.container,{queue:{position:"front",scope:"Control.Modal"},from:1,to:0,duration:this.options.fadeDuration/2,afterFinish:function(){Control.Modal.container.update("");this.resetClassNameAndStyles()}.bind(this)})):(Control.Modal.container.hide(),Control.Modal.container.update(""),this.resetClassNameAndStyles()),"mouse"==this.options.position&&this.element.stopObserving("mousemove",this.mouseHoverListener),this.notify("afterClose")},resetClassNameAndStyles:function(){Control.Modal.overlay.removeClassName(this.options.overlayClassName);
Control.Modal.container.removeClassName(this.options.containerClassName);Control.Modal.container.setStyle({height:null,width:null,top:null,left:null})},notify:function(a){try{if(this.options[a])return[this.options[a].apply(this.options[a],$A(arguments).slice(1))]}catch(b){if(b!=$break)throw b;return!1}}});"undefined"!=typeof Object.Event&&Object.Event.extend(Control.Modal);Control.Modal.attachEvents();

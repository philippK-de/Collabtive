var $jscomp={scope:{},findInternal:function(b,h,g){b instanceof String&&(b=String(b));for(var k=b.length,d=0;d<k;d++){var f=b[d];if(h.call(g,f,d,b))return{i:d,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,h,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[h]=g.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,h,g,k){if(h){g=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var d=b[k];d in g||(g[d]={});g=g[d]}b=b[b.length-1];k=g[b];h=h(k);h!=k&&null!=h&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,g){return $jscomp.findInternal(this,b,g).v}},"es6-impl","es3");
!function(){var b,h=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=function(a){return a.getParam("toc_class","mce-toc")},p=function(a){a=a.getParam("toc_header","h2");return/^h[1-6]$/.test(a)?a:"h2"},v=function(a){a=parseInt(a.getParam("toc_depth","3"),10);return 1<=a&&9>=a?a:3},w=(b=0,function(){return"mcetoc_"+(new Date).getTime().toString(32)+
(b++).toString(32)}),q=function(a){var b=f(a),c=p(a),e=function(a){var b,e=[];for(b=1;b<=a;b++)e.push("h"+b);return e.join(",")}(v(a)),e=a.$(e);return e.length&&/^h[1-9]$/i.test(c)&&(e=e.filter(function(e,c){return!a.dom.hasClass(c.parentNode,b)})),d.map(e,function(b){return{id:b.id?b.id:w(),level:parseInt(b.nodeName.replace(/^H/i,""),10),title:a.$.text(b),element:b}})},r=function(a){var b,c,e,h,d="",f=q(a),l;a:{var m=9;for(l=0;l<f.length;l++)if(f[l].level<m&&(m=f[l].level),1===m){l=m;break a}l=m}--l;
if(!f.length)return"";d+=(e=p(a),b=k.translate("Table of Contents"),h="</"+e+">","<"+e+' contenteditable="true">'+g.DOM.encode(b)+h);for(a=0;a<f.length;a++){if((c=f[a]).element.id=c.id,e=f[a+1]&&f[a+1].level,l===c.level)d+="<li>";else for(b=l;b<c.level;b++)d+="<ul><li>";if(d+='<a href="#'+c.id+'">'+c.title+"</a>",e!==c.level&&e)for(b=c.level;b>e;b--)d+="</li></ul><li>";else d+="</li>",e||(d+="</ul>");l=c.level}return d},t=function(a){var b=f(a),c=a.$("."+b);c.length&&a.undoManager.transact(function(){c.html(r(a))})},
n={hasHeaders:function(a){return 0<q(a).length},insertToc:function(a){var b,c=f(a),c=a.$("."+c);!c.length||0<a.dom.getParents(c[0],".mce-offscreen-selection").length?a.insertContent((b=r(a),'<div class="'+a.dom.encode(f(a))+'" contenteditable="false">'+b+"</div>")):t(a)},updateToc:t},x=function(a){a.addCommand("mceInsertToc",function(){n.insertToc(a)});a.addCommand("mceUpdateToc",function(){n.updateToc(a)})},y=function(a){var b=a.$,c=f(a);a.on("PreProcess",function(a){a=b("."+c,a.node);a.length&&
(a.removeAttr("contentEditable"),a.find("[contenteditable]").removeAttr("contentEditable"))});a.on("SetContent",function(){var a=b("."+c);a.length&&(a.attr("contentEditable",!1),a.children(":first-child").attr("contentEditable",!0))})},u=function(a){return function(b){var c=b.control;a.on("LoadContent SetContent change",function(){c.disabled(a.readonly||!n.hasHeaders(a))})}},z=function(a){a.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:u(a)});a.addButton("tocupdate",
{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"});a.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:u(a)});a.addContextToolbar(function(b){return b&&a.dom.is(b,"."+f(a))&&a.getBody().contains(b)},"tocupdate")};h.add("toc",function(a){x(a);z(a);y(a)})}();

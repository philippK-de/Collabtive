var $jscomp={scope:{},findInternal:function(h,q,l){h instanceof String&&(h=String(h));for(var t=h.length,p=0;p<t;p++){var A=h[p];if(q.call(l,A,p,h))return{i:p,v:A}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(h,q,l){if(l.get||l.set)throw new TypeError("ES3 does not support getters and setters.");h!=Array.prototype&&h!=Object.prototype&&(h[q]=l.value)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(h,q,l,t){if(q){l=$jscomp.global;h=h.split(".");for(t=0;t<h.length-1;t++){var p=h[t];p in l||(l[p]={});l=l[p]}h=h[h.length-1];t=l[h];q=q(t);q!=t&&null!=q&&$jscomp.defineProperty(l,h,{configurable:!0,writable:!0,value:q})}};
$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(h,l){return $jscomp.findInternal(this,h,l).v}},"es6-impl","es3");
!function(){function h(a,b){return r.each(b,function(b){a=b.constructor===RegExp?a.replace(b,""):a.replace(b[0],b[1])}),a}function q(a){var b,e;return e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],a=a.replace(/^[\u00a0 ]+/,""),r.each(e,function(d){if(d.test(a))return b=
!0,!1}),b}function l(a){function b(a){var c="";if(3===a.type)return a.value;if(a=a.firstChild)for(;c+=b(a),a=a.next;);return c}function e(a,b){if(3===a.type&&b.test(a.value))return a.value=a.value.replace(b,""),!1;if(a=a.firstChild){do if(!e(a,b))return!1;while(a=a.next)}return!0}function d(a,b,d){var f=a._listLevel||k;f!==k&&(f<k?c&&(c=c.parent.parent):(g=c,c=null));c&&c.name===b?c.append(a):(g=g||c,c=new C(b,1),1<d&&c.attr("start",""+d),a.wrap(c));a.name="li";f>k&&g&&g.lastChild.append(c);k=f;(function aa(a){if(a._listIgnore)a.remove();
else if(a=a.firstChild)for(;aa(a),a=a.next;);})(a);e(a,/^\u00a0+/);e(a,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);e(a,/^\u00a0+/)}for(var c,g,k=1,u=[],f=a.firstChild;null!=f;)if(u.push(f),null!==(f=f.walk()))for(;void 0!==f&&f.parent!==a;)f=f.walk();for(f=0;f<u.length;f++){if("p"===(a=u[f]).name&&a.firstChild){var m=b(a);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(m)){d(a,"ul");continue}if(q(m)){var m=/([0-9]+)\./.exec(m),G=1;m&&(G=parseInt(m[1],10));d(a,"ol",G);continue}if(a._listLevel){d(a,
"ul",1);continue}}else g=c;c=null}}function t(a,b,e,d){var c,g={},k=a.dom.parseStyle(d);return r.each(k,function(k,f){switch(f){case "mso-list":(c=/\w+ \w+([0-9]+)/i.exec(d))&&(e._listLevel=parseInt(c[1],10));/Ignore/i.test(k)&&e.firstChild&&(e._listIgnore=!0,e.firstChild._listIgnore=!0);break;case "horiz-align":f="text-align";break;case "vert-align":f="vertical-align";break;case "font-color":case "mso-foreground":f="color";break;case "mso-background":case "mso-highlight":f="background";break;case "font-weight":case "font-style":return void("normal"!==
k&&(g[f]=k));case "mso-element":if(/^(comment|comment-list)$/i.test(k))return void e.remove()}0!==f.indexOf("mso-comment")?0!==f.indexOf("mso-")&&("all"===n.getRetainStyleProps(a)||b&&b[f])&&(g[f]=k):e.remove()}),/(bold)/i.test(g["font-weight"])&&(delete g["font-weight"],e.wrap(new C("b",1))),/(italic)/i.test(g["font-style"])&&(delete g["font-style"],e.wrap(new C("i",1))),(g=a.dom.serializeStyle(g,e.name))||null}function p(a,b){a.on("PastePreProcess",function(e){e.content=b(a,e.content,e.internal,
e.wordContent)})}function A(a,b){if(!D.isWordContent(b))return b;var e=[];r.each(a.schema.getBlockElements(),function(a,b){e.push(b)});a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+e.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return b=v.filter(b,[[a,"$1"]]),b=v.filter(b,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function ba(a,b,e,d){if(d||e)return b;var c;e=n.getWebkitStyles(a);if(!1===n.shouldRemoveWebKitStyles(a)||"all"===e)return b;if(e&&(c=e.split(/[, ]/)),
c){var g=a.dom,k=a.selection.getNode();b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(a,b,d,e){a=g.parseStyle(g.decode(d),"span");d={};if("none"===c)return b+e;for(var f=0;f<c.length;f++){var u=a[c[f]],m=g.getStyle(k,c[f],!0);/color/.test(c[f])&&(u=g.toHex(u),m=g.toHex(m));m!==u&&(d[c[f]]=u)}return(d=g.serializeStyle(d,"span"))?b+' style="'+d+'"'+e:b+e})}else b=b.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return b=b.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(a,
b,d,c){return b+' style="'+d+'"'+c})}function ca(a,b){a.$("a",b).find("font,u").each(function(b,d){a.dom.remove(d,!0)})}var B=function(a){var b=a;return{get:function(){return b},set:function(a){b=a},clone:function(){return B(b)}}},H=tinymce.util.Tools.resolve("tinymce.PluginManager"),n={shouldPlainTextInform:function(a){return a.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(a){return a.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(a){return a.getParam("paste_data_images",
!1)},shouldFilterDrop:function(a){return a.getParam("paste_filter_drop",!0)},getPreProcess:function(a){return a.getParam("paste_preprocess")},getPostProcess:function(a){return a.getParam("paste_postprocess")},getWebkitStyles:function(a){return a.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(a){return a.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(a){return a.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(a){return a.getParam("smart_paste",
!0)},isPasteAsTextEnabled:function(a){return a.getParam("paste_as_text",!1)},getRetainStyleProps:function(a){return a.getParam("paste_retain_style_properties")},getWordValidElements:function(a){return a.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(a){return a.getParam("paste_convert_word_fake_lists",
!0)},shouldUseDefaultFilters:function(a){return a.getParam("paste_enable_default_filters",!0)}},da=function(a,b,e){a.addCommand("mceTogglePlainTextPaste",function(){"text"===b.pasteFormat?(b.pasteFormat="html",a.fire("PastePlainTextToggle",{state:!1})):(b.pasteFormat="text",a.fire("PastePlainTextToggle",{state:!0}),!1===e.get()&&n.shouldPlainTextInform(a)&&(a.notificationManager.open({text:a.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),
type:"info"}),e.set(!0)));a.focus()});a.addCommand("mceInsertClipboardContent",function(a,c){c.content&&b.pasteHtml(c.content,c.internal);c.text&&b.pasteText(c.text)})},w=tinymce.util.Tools.resolve("tinymce.Env"),I=tinymce.util.Tools.resolve("tinymce.util.Delay"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),ea=tinymce.util.Tools.resolve("tinymce.util.VK"),x={mark:function(a){return"\x3c!-- x-tinymce/html --\x3e"+a},unmark:function(a){return a.replace("\x3c!-- x-tinymce/html --\x3e","")},isMarked:function(a){return-1!==
a.indexOf("\x3c!-- x-tinymce/html --\x3e")},internalHtmlMime:function(){return"x-tinymce/html"}},fa=tinymce.util.Tools.resolve("tinymce.html.Entities"),J=function(a){return a.replace(/\r?\n/g,"<br>")},K=function(a,b,e){a=a.split(/\n\n/);var d=function(a,b){var d,c=[];a="<"+a;if("object"==typeof b){for(d in b)b.hasOwnProperty(d)&&c.push(d+'="'+fa.encodeAllRaw(b[d])+'"');c.length&&(a+=" "+c.join(" "))}return a+">"}(b,e),c="</"+b+">";b=r.map(a,function(a){return a.split(/\n/).join("<br />")});return 1===
b.length?b[0]:r.map(b,function(a){return d+a+c}).join("")},L={isPlainText:function(a){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a)},convert:function(a,b,e){return b?K(a,b,e):J(a)},toBRs:J,toBlockElements:K},M=tinymce.util.Tools.resolve("tinymce.html.DomParser"),C=tinymce.util.Tools.resolve("tinymce.html.Node"),N=tinymce.util.Tools.resolve("tinymce.html.Schema"),ga=tinymce.util.Tools.resolve("tinymce.html.Serializer"),v={filter:h,
innerText:function(a){var b=N(),e=M({},b),d="",c=b.getShortEndedElements(),g=r.makeMap("script noscript style textarea video audio iframe object"," "),k=b.getBlockElements();return a=h(a,[/<!\[[^\]]+\]>/g]),function f(a){var b=a.name,e=a;if("br"!==b)if(c[b]&&(d+=" "),g[b])d+=" ";else{if(3===a.type&&(d+=a.value),!a.shortEnded&&(a=a.firstChild))for(;f(a),a=a.next;);k[b]&&e.next&&(d+="\n","p"===b&&(d+="\n"))}else d+="\n"}(e.parse(a)),d},trimHtml:function(a){return a=h(a,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,
/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(a,e,d){return e||d?"\u00a0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(a){var b=0;return function(){return a+b++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}},D={preProcess:function(a,b){return n.shouldUseDefaultFilters(a)?function(a,b){var c,d;(c=n.getRetainStyleProps(a))&&(d=r.makeMap(c.split(/[, ]/)));
b=v.filter(b,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/\x3c!--[\s\S]+?--\x3e/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return 0<b.length?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join("\u00a0"):""}]]);c=n.getWordValidElements(a);
c=N({valid_elements:c,valid_children:"-li[p]"});r.each(c.elements,function(a){a.attributes["class"]||(a.attributes["class"]={},a.attributesOrder.push("class"));a.attributes.style||(a.attributes.style={},a.attributesOrder.push("style"))});var e=M({},c);e.addAttributeFilter("style",function(b){for(var c,e=b.length;e--;)(c=b[e]).attr("style",t(a,d,c,c.attr("style"))),"span"===c.name&&c.parent&&!c.attributes.length&&c.unwrap()});e.addAttributeFilter("class",function(a){for(var b,c,d=a.length;d--;)c=(b=
a[d]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(c)&&b.remove(),b.attr("class",null)});e.addNodeFilter("del",function(a){for(var b=a.length;b--;)a[b].remove()});e.addNodeFilter("a",function(a){for(var b,c,d,e=a.length;e--;)(c=(b=a[e]).attr("href"),d=b.attr("name"),c&&-1!==c.indexOf("#_msocom_"))?b.remove():(c&&0===c.indexOf("file://")&&(c=c.split("#")[1])&&(c="#"+c),c||d)?d&&!/^_?(?:toc|edn|ftn)/i.test(d)?b.unwrap():b.attr({href:c,name:d}):b.unwrap()});b=e.parse(b);return n.shouldConvertWordFakeLists(a)&&
l(b),b=ga({validate:a.settings.validate},c).serialize(b)}(a,b):b},isWordContent:function(a){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(a)||/class="OutlineElement/.test(a)||/id="?docs\-internal\-guid\-/.test(a)}},O=function(a,b){return{content:a,cancelled:b}},E=function(a,b){return a.insertContent(b,{merge:n.shouldMergeFormats(a),paste:!0}),!0},P=function(a){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(a)},ha=function(a){return P(a)&&
/.(gif|jpe?g|png)$/.test(a)},ia=function(a,b,e){return!(!1!==a.selection.isCollapsed()||!P(b)||(c=b,g=e,(d=a).undoManager.extra(function(){g(d,c)},function(){d.execCommand("mceInsertLink",!1,c)}),0));var d,c,g},ja=function(a,b,e){return!!ha(b)&&(c=b,g=e,(d=a).undoManager.extra(function(){g(d,c)},function(){d.insertContent('<img src="'+c+'">')}),!0);var d,c,g},ka=function(a,b){!1===n.isSmartPasteEnabled(a)?E(a,b):r.each([ia,ja,E],function(e){return!0!==e(a,b,E)})},z=function(a,b,e){e=e||x.isMarked(b);
var d=x.unmark(b),d=(b=D.isWordContent(d))?D.preProcess(a,d):d,c,g,k,d=a.fire("PastePreProcess",{content:d,internal:e,wordContent:b});e=a.hasEventListeners("PastePostProcess")&&!d.isDefaultPrevented()?(c=d.content,g=a.dom.create("div",{style:"display:none"},c),k=a.fire("PastePostProcess",{node:g,internal:e,wordContent:b}),O(k.node.innerHTML,k.isDefaultPrevented())):O(d.content,d.isDefaultPrevented());!1===e.cancelled&&ka(a,e.content)},Q=function(a,b){b=a.dom.encode(b).replace(/\r\n/g,"\n");b=L.convert(b,
a.settings.forced_root_block,a.settings.forced_root_block_attrs);z(a,b,!1)},R=function(a){var b={};if(a){if(a.getData){var e=a.getData("Text");e&&0<e.length&&-1===e.indexOf("data:text/mce-internal,")&&(b["text/plain"]=e)}if(a.types)for(e=0;e<a.types.length;e++){var d=a.types[e];try{b[d]=a.getData(d)}catch(c){b[d]=""}}}return b},y=function(a,b){return b in a&&0<a[b].length},S=function(a){return y(a,"text/html")||y(a,"text/plain")},la=function(a,b,e,d){var c=v.createIdGenerator("mceclip");b&&(a.selection.setRng(b),
b=null);var g,k,u,f;b=e.result;var m=-1!==(g=b.indexOf(","))?b.substr(g+1):null,c=c();g=a.settings.images_reuse_filename&&d.name?(k=d.name,(u=k.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?a.dom.encode(u[1]):null):c;k=new Image;if(k.src=b,f=a.settings,!f.images_dataimg_filter||f.images_dataimg_filter(k)){var h;f=a.editorUpload.blobCache;k=void 0;(h=f.findFirst(function(a){return a.base64()===m}))?k=h:(k=f.create(c,d,m,g),f.add(k));z(a,'<img src="'+k.blobUri()+'">',!1)}else z(a,'<img src="'+b+'">',
!1)},T=function(a,b,e){function d(c){var d,g,f,m=!1;if(c)for(d=0;d<c.length;d++)if(g=c[d],/^image\/(jpeg|png|gif|bmp)$/.test(g.type))m=g.getAsFile?g.getAsFile():g,(f=new window.FileReader).onload=la.bind(null,a,e,f,m),f.readAsDataURL(m),b.preventDefault(),m=!0;return m}var c="paste"===b.type?b.clipboardData:b.dataTransfer;if(a.settings.paste_data_images&&c)return d(c.items)||d(c.files)},U=function(a){return ea.metaKeyPressed(a)&&86===a.keyCode||a.shiftKey&&45===a.keyCode},ma=function(a,b,e){function d(c,
d,e,g){var f,k;y(c,"text/html")?f=c["text/html"]:(f=b.getHtml(),g=g||x.isMarked(f),b.isDefaultContent(f)&&(e=!0));f=v.trimHtml(f);b.remove();k=!1===g&&L.isPlainText(f);f.length&&!k||(e=!0);e&&(f=y(c,"text/plain")&&k?c["text/plain"]:v.innerText(f));b.isDefaultContent(f)?d||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):e?Q(a,f):z(a,f,g)}var c,g=0;a.on("keydown",function(d){function e(a){U(a)&&!a.isDefaultPrevented()&&b.remove()}if(!(!U(d)||d.isDefaultPrevented()||
(c=d.shiftKey&&86===d.keyCode)&&w.webkit&&-1!==navigator.userAgent.indexOf("Version/"))){if(d.stopImmediatePropagation(),g=(new Date).getTime(),w.ie&&c)return d.preventDefault(),void a.fire("paste",{ieFake:!0});b.remove();b.create();a.once("keyup",e);a.once("paste",function(){a.off("keyup",e)})}});a.on("paste",function(k){var h,f,m=(new Date).getTime(),l=(h=R(k.clipboardData||a.getDoc().dataTransfer),v.isMsEdge()?r.extend(h,{"text/html":""}):h);h=(new Date).getTime()-m;var n=1E3>(new Date).getTime()-
g-h,q="text"===e||c,p=y(l,x.internalHtmlMime());c=!1;k.isDefaultPrevented()||(f=k.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&f&&f.items&&0===f.items.length)?b.remove():S(l)||!T(a,k,b.getLastRng()||a.selection.getRng())?(n||k.preventDefault(),!w.ie||n&&!k.ieFake||y(l,"text/html")||(b.create(),a.dom.bind(b.getEl(),"paste",function(a){a.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),l["text/html"]=b.getHtml()),y(l,"text/html")?(k.preventDefault(),p||(p=x.isMarked(l["text/html"])),
d(l,n,q,p)):I.setEditorTimeout(a,function(){d(l,n,q,p)},0)):b.remove()})},F=function(a){return a.dom.get("mcepastebin")},na=function(a){var b=B(null);return{create:function(){return function(a,b,c){var d,e=a.dom,h=a.getBody(),f=a.dom.getViewPort(a.getWin()).y,m=20;b.set(a.selection.getRng());var l=b.get();if(a.inline&&(d=a.selection.getScrollContainer())&&0<d.scrollTop&&(f=d.scrollTop),l.getClientRects)(m=function(a){var b,c,d;d=a.startContainer;if((b=a.getClientRects()).length)return b[0];if(a.collapsed&&
1===d.nodeType){for(d=d.childNodes[l.startOffset];d&&3===d.nodeType&&!d.data.length;)d=d.nextSibling;if(d)return"BR"===d.tagName&&(c=e.doc.createTextNode("\ufeff"),d.parentNode.insertBefore(c,d),(a=e.createRng()).setStartBefore(c),a.setEndAfter(c),b=a.getClientRects(),e.remove(c)),b.length?b[0]:void 0}}(l))?m=f+(m.top-e.getPos(h).y):(m=f,(f=l.startContainer)&&(3===f.nodeType&&f.parentNode!==h&&(f=f.parentNode),1===f.nodeType&&(m=e.getPos(f,d||h).y)));c=a.dom.add(a.getBody(),"div",{id:"mcepastebin",
contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+m+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},c);(w.ie||w.gecko)&&e.setStyle(c,"left","rtl"===e.getStyle(h,"direction",!0)?65535:-65535);e.bind(c,"beforedeactivate focusin focusout",function(a){a.stopPropagation()});c.focus();a.selection.select(c,!0)}(a,b,"%MCEPASTEBIN%")},remove:function(){if(F(a)){for(var e,d=b.get();e=a.dom.get("mcepastebin");)a.dom.remove(e),a.dom.unbind(e);d&&a.selection.setRng(d)}b.set(null)},
getEl:function(){return F(a)},getHtml:function(){return function(a){var b,c,e,k,h=function(b,c){b.appendChild(c);a.dom.remove(c,!0)};c=r.grep(a.getBody().childNodes,function(a){return"mcepastebin"===a.id});b=c.shift();r.each(c,function(a){h(b,a)});for(c=(e=a.dom.select("div[id=mcepastebin]",b)).length-1;0<=c;c--)k=a.dom.create("div"),b.insertBefore(k,e[c]),h(k,e[c]);return b?b.innerHTML:""}(a)},getLastRng:function(){return b.get()},isDefault:function(){return b="%MCEPASTEBIN%",c=F(a),(d=c)&&"mcepastebin"===
d.id&&c.innerHTML===b;var b,d,c},isDefaultContent:function(a){return"%MCEPASTEBIN%"===a}}},oa=function(a){var b=na(a),e=n.isPasteAsTextEnabled(a)?"text":"html";return a.on("preInit",function(){return ma(d=a,b,e),void d.parser.addNodeFilter("img",function(a,b,e){var f;b=function(a){a.attr("data-mce-object")||c===w.transparentSrc||a.remove()};if(!d.settings.paste_data_images&&(f=e).data&&!0===f.data.paste)for(e=a.length;e--;)(c=a[e].attributes.map.src)&&(0===c.indexOf("webkit-fake-url")?b(a[e]):d.settings.allow_html_data_urls||
0!==c.indexOf("data:")||b(a[e]))});var d,c}),{pasteFormat:e,pasteHtml:function(b,c){return z(a,b,c)},pasteText:function(b){return Q(a,b)},pasteImageData:function(b,c){return T(a,b,c)},getDataTransferItems:R,hasHtmlOrText:S,hasContentType:y}},pa=function(){},V=function(a,b,e,d){var c;a:{var g=a.clipboardData,k=b.html,h=b.text;if(f=g,!1!==w.iOS||void 0===f||"function"!=typeof f.setData||!0===v.isMsEdge())c=!1;else{try{c=(g.clearData(),g.setData("text/html",k),g.setData("text/plain",h),g.setData(x.internalHtmlMime(),
k),!0);break a}catch(m){c=!1;break a}var f}}c?(a.preventDefault(),d()):e(b.html,d)},W=function(a){return function(b,e){b=x.mark(b);var d=a.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"});b=a.dom.create("div",{contenteditable:"true"},b);a.dom.setStyles(d,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});d.appendChild(b);a.dom.add(a.getBody(),d);var c=a.selection.getRng();b.focus();var g=a.dom.createRng();g.selectNodeContents(b);a.selection.setRng(g);setTimeout(function(){a.selection.setRng(c);
d.parentNode.removeChild(d);e()},0)}},X=function(a){return{html:a.selection.getContent({contextual:!0}),text:a.selection.getContent({format:"text"})}},qa=function(a){a.on("cut",function(b){!1===a.selection.isCollapsed()&&V(b,X(a),W(a),function(){setTimeout(function(){a.execCommand("Delete")},0)})});a.on("copy",function(b){!1===a.selection.isCollapsed()&&V(b,X(a),W(a),pa)})},Y=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ra=function(a,b,e){n.shouldBlockDrop(a)&&a.on("dragend dragover draggesture dragdrop drop drag",
function(a){a.preventDefault();a.stopPropagation()});n.shouldPasteDataImages(a)||a.on("drop",function(a){var b=a.dataTransfer;b&&b.files&&0<b.files.length&&a.preventDefault()});a.on("drop",function(d){var c,g;if(g=Y.getCaretRangeFromPoint(d.clientX,d.clientY,a.getDoc()),!d.isDefaultPrevented()&&!e.get()){c=b.getDataTransferItems(d.dataTransfer);var k,h=b.hasContentType(c,x.internalHtmlMime());if((b.hasHtmlOrText(c)&&(!(k=c["text/plain"])||0!==k.indexOf("file://"))||!b.pasteImageData(d,g))&&g&&n.shouldFilterDrop(a)){var f=
c["mce-internal"]||c["text/html"]||c["text/plain"];f&&(d.preventDefault(),I.setEditorTimeout(a,function(){a.undoManager.transact(function(){c["mce-internal"]&&a.execCommand("Delete");a.focus();a.selection.setRng(g);f=v.trimHtml(f);c["text/html"]?b.pasteHtml(f,h):b.pasteText(f)})}))}}});a.on("dragstart",function(a){e.set(!0)});a.on("dragover dragend",function(b){if(n.shouldPasteDataImages(a)&&!1===e.get()){b.preventDefault();var c=Y.getCaretRangeFromPoint(b.clientX,b.clientY,a.getDoc());a.focus();
a.selection.setRng(c)}"dragend"===b.type&&e.set(!1)})},sa=function(a){var b=a.plugins.paste,e=n.getPreProcess(a);e&&a.on("PastePreProcess",function(a){e.call(b,b,a)});var d=n.getPostProcess(a);d&&a.on("PastePostProcess",function(a){d.call(b,b,a)})},ta=function(a){w.webkit&&p(a,ba);w.ie&&(p(a,A),a.on("PastePostProcess",function(b){ca(a,b.node)}))},Z=function(a){return function(){return a}},ua=(Z(!1),Z(!0),function(a){for(var b=Array(arguments.length-1),e=1;e<arguments.length;e++)b[e-1]=arguments[e];
return function(){for(var d=Array(arguments.length),c=0;c<d.length;c++)d[c]=arguments[c];d=b.concat(d);return a.apply(null,d)}}),va=function(a,b,e){var d=e.control;d.active("text"===b.pasteFormat);a.on("PastePlainTextToggle",function(a){d.active(a.state)})},wa=B(!1);H.add("paste",function(a){if(!1===!(!/(^|[ ,])powerpaste([, ]|$)/.test(a.settings.plugins)||!H.get("powerpaste")||("undefined"!=typeof window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),
0))){var b=oa(a),e=ta(a),d=B(!1),c=ua(va,a,b);a.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:c});a.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:b.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:c});return da(a,b,wa),sa(a),qa(a),ra(a,b,d),{clipboard:b,quirks:e}}})}();

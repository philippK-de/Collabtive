!function(){var e=function(a){var b=a;return{get:function(){return b},set:function(a){b=a},clone:function(){return e(b)}}},m=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=f.DOM.uniqueId(),n=function(a,b){var c=g.toArray(a.getElementsByTagName("link"));0===g.grep(c,function(a){return a.id===h}).length&&(b=f.DOM.create("link",{id:h,rel:"stylesheet",href:b}),a.getElementsByTagName("head")[0].appendChild(b))},
k=function(a,b,c){var d=a.dom,p=a.settings.visualblocks_content_css;n(a.getDoc(),p||b+"/css/visualblocks.css");d.toggleClass(a.getBody(),"mce-visualblocks");c.set(!c.get());b=c.get();a.fire("VisualBlocks",{state:b})},q=function(a,b,c){a.addCommand("mceVisualBlocks",function(){k(a,b,c)})},r=function(a,b,c){a.on("PreviewFormats AfterPreviewFormats",function(b){c.get()&&a.dom.toggleClass(a.getBody(),"mce-visualblocks","afterpreviewformats"===b.type)});a.on("init",function(){a.getParam("visualblocks_default_state",
!1)&&k(a,b,c)});a.on("remove",function(){a.dom.removeClass(a.getBody(),"mce-visualblocks")})},l=function(a,b){return function(c){var d=c.control;d.active(b.get());a.on("VisualBlocks",function(a){d.active(a.state)})}};m.add("visualblocks",function(a,b){var c=e(!1);q(a,b,c);a.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:l(a,c)});a.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:l(a,c),selectable:!0,context:"view",prependToContext:!0});
r(a,b,c)})}();

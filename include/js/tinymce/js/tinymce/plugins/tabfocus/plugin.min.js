!function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),q=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.EditorManager"),l=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),t={getTabFocus:function(a){return a.getParam("tab_focus",a.getParam("tabfocus_elements",":prev,:next"))}},g=q.DOM,u=function(a){a.keyCode!==
n.TAB||a.ctrlKey||a.altKey||a.metaKey||a.preventDefault()},w=function(a){function e(f){function e(b){function e(a){return/INPUT|TEXTAREA|BUTTON/.test(a.tagName)&&k.get(f.id)&&-1!==a.tabIndex&&function v(a){return"BODY"===a.nodeName||"hidden"!==a.type&&"none"!==a.style.display&&"hidden"!==a.style.visibility&&v(a.parentNode)}(a)}if(c=g.select(":input:enabled,*[tabindex]:not(iframe)"),m.each(c,function(b,c){if(b.id===a.id)return h=c,!1}),0<b)for(d=h+1;d<c.length;d++){if(e(c[d]))return c[d]}else for(d=
h-1;0<=d;d--)if(e(c[d]))return c[d];return null}var h,c,b,d;!(f.keyCode!==n.TAB||f.ctrlKey||f.altKey||f.metaKey||f.isDefaultPrevented())&&(1===(b=m.explode(t.getTabFocus(a))).length&&(b[1]=b[0],b[0]=":prev"),c=f.shiftKey?":prev"===b[0]?e(-1):g.get(b[0]):":next"===b[1]?e(1):g.get(b[1]))&&(b=k.get(c.id||c.name),c.id&&b?b.focus():r.setTimeout(function(){l.webkit||window.focus();c.focus()},10),f.preventDefault())}a.on("init",function(){a.inline&&g.setAttrib(a.getBody(),"tabIndex",null);a.on("keyup",u);
l.gecko?a.on("keypress keydown",e):a.on("keydown",e)})};p.add("tabfocus",function(a){w(a)})}();

!function(){var y=tinymce.util.Tools.resolve("tinymce.PluginManager"),z=function(a,b){var c;return a.dom.getParents(a.selection.getStart(),function(a){var d;(d=a.style["forecolor"===b?"color":"background-color"])&&(c=d)}),c},A=function(a){var b,c=[];for(b=0;b<a.length;b+=2)c.push({text:a[b+1],color:"#"+a[b]});return c},B=function(a,b,c){a.undoManager.transact(function(){a.focus();a.formatter.apply(b,{value:c});a.nodeChanged()})},C=function(a,b){a.undoManager.transact(function(){a.focus();a.formatter.remove(b,
{value:null},null,!0);a.nodeChanged()})},D=function(a){a.addCommand("mceApplyTextcolor",function(b,c){B(a,b,c)});a.addCommand("mceRemoveTextcolor",function(b){C(a,b)})},m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),E=tinymce.util.Tools.resolve("tinymce.util.Tools"),q="000000;Black;993300;Burnt orange;333300;Dark olive;003300;Dark green;003366;Dark azure;000080;Navy Blue;333399;Indigo;333333;Very dark gray;800000;Maroon;FF6600;Orange;808000;Olive;008000;Green;008080;Teal;0000FF;Blue;666699;Grayish blue;808080;Gray;FF0000;Red;FF9900;Amber;99CC00;Yellow green;339966;Sea green;33CCCC;Turquoise;3366FF;Royal blue;800080;Purple;999999;Medium gray;FF00FF;Magenta;FFCC00;Gold;FFFF00;Yellow;00FF00;Lime;00FFFF;Aqua;00CCFF;Sky blue;993366;Red violet;FFFFFF;White;FF99CC;Pink;FFCC99;Peach;FFFF99;Light yellow;CCFFCC;Pale green;CCFFFF;Pale cyan;99CCFF;Light sky blue;CC99FF;Plum".split(";"),
g=function(a){return a.getParam("textcolor_cols",8)},n=tinymce.util.Tools.resolve("tinymce.util.I18n"),F=function(a,b,c,h){var d,e,r,k,l,t,f=0,p=m.DOM.uniqueId("mcearia"),g=function(a,b){var c="transparent"===a;return'<td class="mce-grid-cell'+(c?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+f++ +'" data-mce-color="'+(a||"")+'" role="option" tabIndex="-1" style="'+(a?"background-color: "+a:"")+'" title="'+n.translate(b)+'">'+(c?"&#215;":"")+"</div></td>"};(c=A(c)).push({text:n.translate("No color"),
color:"transparent"});e='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';r=c.length-1;for(l=0;l<b;l++){e+="<tr>";for(k=0;k<a;k++)e+=(t=l*a+k)>r?"<td></td>":g((d=c[t]).color,d.text);e+="</tr>"}if(h){e+='<tr><td colspan="'+a+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+
n.translate("Custom...")+"</button></div></td></tr>";e+="<tr>";for(k=0;k<a;k++)e+=g("","Custom color");e+="</tr>"}return e+="</tbody></table>"},u=function(a,b){a.style.background=b;a.setAttribute("data-mce-color",b)},v=function(a){return function(b){b=b.control;b._color?a.execCommand("mceApplyTextcolor",b.settings.format,b._color):a.execCommand("mceRemoveTextcolor",b.settings.format)}},w=function(a,b){return function(c){var h,d=this.parent(),e=z(a,d.settings.format),g=function(b){d.hidePanel();d.color(b);
a.execCommand("mceApplyTextcolor",d.settings.format,b)};m.DOM.getParent(c.target,".mce-custom-color-btn")&&(d.hidePanel(),a.getParam("color_picker_callback",null).call(a,function(a){var c,e,f;c=d.panel.getEl().getElementsByTagName("table")[0];c=E.map(c.rows[c.rows.length-1].childNodes,function(a){return a.firstChild});for(f=0;f<c.length&&(e=c[f]).getAttribute("data-mce-color");f++);if(f===b)for(f=0;f<b-1;f++)u(c[f],c[f+1].getAttribute("data-mce-color"));u(e,a);g(a)},e));(h=c.target.getAttribute("data-mce-color"))?
(this.lastId&&m.DOM.get(this.lastId).setAttribute("aria-selected",!1),c.target.setAttribute("aria-selected",!0),this.lastId=c.target.id,"transparent"===h?(d.hidePanel(),d.resetColor(),a.execCommand("mceRemoveTextcolor",d.settings.format)):g(h)):null!==h&&d.hidePanel()}},x=function(a,b){return function(){var c=b?a.getParam("forecolor_cols",g(a)):a.getParam("backcolor_cols",g(a)),h=b?a.getParam("forecolor_rows",a.getParam("textcolor_rows",5)):a.getParam("backcolor_rows",a.getParam("textcolor_rows",
5)),d=b?a.getParam("forecolor_map",a.getParam("textcolor_map",q)):a.getParam("backcolor_map",a.getParam("textcolor_map",q)),e="function"==typeof a.getParam("color_picker_callback",null);return F(c,h,d,e)}};y.add("textcolor",function(a){D(a);a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:x(a,!0),onclick:w(a,a.getParam("forecolor_cols",g(a)))},onclick:v(a)});a.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",
format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:x(a,!1),onclick:w(a,a.getParam("backcolor_cols",g(a)))},onclick:v(a)})})}();

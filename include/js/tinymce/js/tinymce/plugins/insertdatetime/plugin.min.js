!function(){var f=function(a){var c=a;return{get:function(){return c},set:function(a){c=a},clone:function(){return f(c)}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=function(a){return a.getParam("insertdatetime_timeformat",a.translate("%H:%M:%S"))},m=function(a){return a.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},p="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),q="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
t="January February March April May June July August September October November December".split(" "),d=function(a,c){if((a=""+a).length<c)for(var b=0;b<c-a.length;b++)a="0"+a;return a},h=function(a,c,b){return b=b||new Date,c.replace("%D","%m/%d/%Y").replace("%r","%I:%M:%S %p").replace("%Y",""+b.getFullYear()).replace("%y",""+b.getYear()).replace("%m",d(b.getMonth()+1,2)).replace("%d",d(b.getDate(),2)).replace("%H",""+d(b.getHours(),2)).replace("%M",""+d(b.getMinutes(),2)).replace("%S",""+d(b.getSeconds(),
2)).replace("%I",""+((b.getHours()+11)%12+1)).replace("%p",12>b.getHours()?"AM":"PM").replace("%B",""+a.translate(t[b.getMonth()])).replace("%b",""+a.translate(r[b.getMonth()])).replace("%A",""+a.translate(q[b.getDay()])).replace("%a",""+a.translate(p[b.getDay()])).replace("%%","%")},e=function(a,c){if(a.getParam("insertdatetime_element",!1)){var b=h(a,c);c=/%[HMSIp]/.test(c)?h(a,"%Y-%m-%dT%H:%M"):h(a,"%Y-%m-%d");var d=a.dom.getParent(a.selection.getStart(),"time");d?(e=d,f=c,g=b,l=(k=a).dom.create("time",
{datetime:f},g),e.parentNode.insertBefore(l,e),k.dom.remove(e),k.selection.select(l,!0),k.selection.collapse(!1)):a.insertContent('<time datetime="'+c+'">'+b+"</time>")}else a.insertContent(h(a,c));var k,e,f,g,l},u=function(a){a.addCommand("mceInsertDate",function(){e(a,a.getParam("insertdatetime_dateformat",a.translate("%Y-%m-%d")))});a.addCommand("mceInsertTime",function(){e(a,g(a))})},v=tinymce.util.Tools.resolve("tinymce.util.Tools"),w=function(a,c){var b,d=(b=m(a),v.map(b,function(b){return{text:h(a,
b),onclick:function(){c.set(b);e(a,b)}}}));a.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:d,onclick:function(){var b;(b=c.get())||(b=m(a),b=0<b.length?b[0]:g(a));e(a,b)}});a.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:d,context:"insert"})};n.add("insertdatetime",function(a){var c=f(null);u(a);w(a,c)})}();

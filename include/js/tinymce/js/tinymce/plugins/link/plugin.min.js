var $jscomp={scope:{},findInternal:function(d,g,e){d instanceof String&&(d=String(d));for(var m=d.length,f=0;f<m;f++){var r=d[f];if(g.call(e,r,f,d))return{i:f,v:r}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[g]=e.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,g,e,m){if(g){e=$jscomp.global;d=d.split(".");for(m=0;m<d.length-1;m++){var f=d[m];f in e||(e[f]={});e=e[f]}d=d[d.length-1];m=e[d];g=g(m);g!=m&&null!=g&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6-impl","es3");
!function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.util.VK"),e=function(a){return"boolean"==typeof a.link_assume_external_targets&&a.link_assume_external_targets},m=function(a,b){a.settings.target_list=b},f=function(a){return"boolean"==typeof a.allow_unsafe_link_target&&a.allow_unsafe_link_target},r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),D=tinymce.util.Tools.resolve("tinymce.Env"),q=tinymce.util.Tools.resolve("tinymce.util.Tools"),
E=function(a,b){var c,n,d=["noopener"];a=a?a.split(/\s+/):[];var k=function(a){return a.filter(function(a){return-1===q.inArray(d,a)})};return(a=b?(c=k(c=a)).length?c.concat(d):d:k(a)).length?(n=a,q.trim(n.sort().join(" "))):null},B=function(a,b){return b=b||a.selection.getNode(),v(b)?a.dom.select("a[href]",b)[0]:a.dom.getParent(b,"a[href]")},w=function(a){return a&&"A"===a.nodeName&&a.href},v=function(a){return a&&"FIGURE"===a.nodeName&&/\bimage\b/i.test(a.className)},K=function(a,b){return function(c){a.undoManager.transact(function(){var d=
a.selection.getNode(),l=B(a,d),k={href:c.href,target:c.target?c.target:null,rel:c.rel?c.rel:null,"class":c["class"]?c["class"]:null,title:c.title?c.title:null};void 0!==a.settings.rel_list||!1!==f(a.settings)||(k.rel=E(k.rel,"_blank"===k.target));c.href===b.href&&(b.attach(),b={});if(l)a.focus(),c.hasOwnProperty("text")&&("innerText"in l?l.innerText=c.text:l.textContent=c.text),a.dom.setAttribs(l,k),a.selection.select(l),a.undoManager.add();else if(v(d)){var e,p;(p=a.dom.select("img",d)[0])&&(e=a.dom.create("a",
k),p.parentNode.insertBefore(e,p),e.appendChild(p))}else c.hasOwnProperty("text")?a.insertContent(a.dom.createHTML("a",k,a.dom.encode(c.text))):a.execCommand("mceInsertLink",!1,k)})}},F=function(a){return function(){a.undoManager.transact(function(){var b=a.selection.getNode();if(v(b)){var c,d;(d=a.dom.select("img",b)[0])&&(c=a.dom.getParents(d,"a[href]",b)[0])&&(c.parentNode.insertBefore(d,c),a.dom.remove(c))}else a.execCommand("unlink")})}},L=function(a){return!(/</.test(a)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(a)||
-1===a.indexOf("href=")))},M=tinymce.util.Tools.resolve("tinymce.util.Delay"),N=tinymce.util.Tools.resolve("tinymce.util.XHR"),G={},A=function(a,b,c){var d=function(a,c){return c=c||[],q.each(a,function(a){var e={text:a.text||a.title};a.menu?e.menu=d(a.menu):(e.value=a.value,b&&b(e));c.push(e)}),c};return d(a,c||[])},H=function(a,b,c){var d=a.selection.getRng();M.setEditorTimeout(a,function(){a.windowManager.confirm(b,function(b){a.selection.setRng(d);c(b)})})},y=function(a,b){var c,d,l,k,g,p,r,u,
v,w,x,h={},z=a.dom,y=function(a){var b=l.find("#text");(!b.value()||a.lastControl&&b.value()===a.lastControl.text())&&b.value(a.control.text());l.find("#href").value(a.control.value())},t=function(){d||!k||h.text||this.parent().parent().find("#text")[0].value(this.value())};k=L(a.selection.getContent());c=B(a);h.text=d=(c?c.innerText||c.textContent:a.selection.getContent({format:"text"})).replace(/\uFEFF/g,"");h.href=c?z.getAttrib(c,"href"):"";c?h.target=z.getAttrib(c,"target"):"string"==typeof a.settings.default_link_target&&
(h.target=a.settings.default_link_target);(x=z.getAttrib(c,"rel"))&&(h.rel=x);(x=z.getAttrib(c,"class"))&&(h["class"]=x);(x=z.getAttrib(c,"title"))&&(h.title=x);k&&(g={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){h.text=this.value()}});b&&(p={type:"listbox",label:"Link list",values:A(b,function(b){b.value=a.convertURL(b.value||b.url,"href")},[{text:"None",value:""}]),onselect:y,value:a.convertURL(h.href,"href"),onPostRender:function(){p=this}});!1!==a.settings.target_list&&
(void 0===a.settings.target_list&&m(a,[{text:"None",value:""},{text:"New window",value:"_blank"}]),u={name:"target",type:"listbox",label:"Target",values:A(a.settings.target_list)});void 0!==a.settings.rel_list&&(r={name:"rel",type:"listbox",label:"Rel",values:A(a.settings.rel_list,function(b){!1===f(a.settings)&&(b.value=E(b.value,"_blank"===h.target))})});void 0!==a.settings.link_class_list&&(v={name:"class",type:"listbox",label:"Class",values:A(a.settings.link_class_list,function(b){b.value&&(b.textStyle=
function(){return a.formatter.getCssText({inline:"a",classes:[b.value]})})})});!1!==a.settings.link_title&&(w={name:"title",type:"textbox",label:"Title",value:h.title});l=a.windowManager.open({title:"Insert link",data:h,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(b){var c=b.meta||{};p&&p.value(a.convertURL(this.value(),"href"));q.each(b.meta,function(a,b){var c=l.find("#"+b);"text"===b?0===d.length&&(c.value(a),h.text=a):c.value(a)});c.attach&&
(G={href:this.value(),attach:c.attach});c.text||t.call(this)},onkeyup:t,onpaste:t,onbeforecall:function(a){a.meta=l.toJSON()}},g,w,function(b){var c=[];if(q.each(a.dom.select("a:not([href])"),function(a){(a=a.name||a.id)&&c.push({text:a,value:"#"+a,selected:-1!==b.indexOf("#"+a)})}),c.length)return c.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:c,onselect:y}}(h.href),p,r,u,v],onSubmit:function(b){var c=e(a.settings),g=K(a,G),l=F(a),n=q.extend({},h,b.data),f=
n.href;f?(k&&n.text!==d||delete n.text,0<f.indexOf("@")&&-1===f.indexOf("//")&&-1===f.indexOf("mailto:")?H(a,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(a){a&&(n.href="mailto:"+f);g(n)}):!0===c&&!/^\w+:/i.test(f)||!1===c&&/^\s*www[\.|\d\.]/i.test(f)?H(a,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(a){a&&(n.href="http://"+f);g(n)}):g(n)):l()}})},O=function(a){var b;"string"==
typeof(b=a.settings.link_list)?N.send({url:b,success:function(b){y(a,JSON.parse(b))}}):"function"==typeof b?b(function(b){y(a,b)}):y(a,b)},t=function(a,b){return a.dom.getParent(b,"a[href]")},C=function(a,b){if(b){var c=(d=b).getAttribute("data-mce-href")||d.getAttribute("href");if(/^#/.test(c))b=a.$(c),b.length&&a.selection.scrollIntoView(b[0],!0);else if(a=b.href,!D.ie||10<D.ie)b=document.createElement("a"),b.target="_blank",b.href=a,b.rel="noreferrer noopener",a=document.createEvent("MouseEvents"),
a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(b),b.dispatchEvent(a),document.body.removeChild(b);else if(b=window.open("","_blank"))b.opener=null,b=b.document,b.open(),b.write('<meta http-equiv="refresh" content="0; url='+r.DOM.encode(a)+'">'),b.close()}var d},u=function(a){return function(){O(a)}},I=function(a){return function(){C(a,t(a,a.selection.getStart()))}},P=function(a){return function(b){var c,d,e,f,g=a.settings;return!!("boolean"==typeof g.link_context_toolbar&&
g.link_context_toolbar&&(!(f=a.plugins.contextmenu)||!f.isContextMenuVisible())&&w(b)&&3===(e=(d=(c=a.selection).getRng()).startContainer).nodeType&&c.isCollapsed()&&0<d.startOffset&&d.startOffset<e.data.length)}},Q=function(a){a.on("click",function(b){var c=t(a,b.target);c&&g.metaKeyPressed(b)&&(b.preventDefault(),C(a,c))});a.on("keydown",function(b){var c,d=t(a,a.selection.getStart());d&&13===b.keyCode&&!0===(c=b).altKey&&!1===c.shiftKey&&!1===c.ctrlKey&&!1===c.metaKey&&(b.preventDefault(),C(a,
d))})},J=function(a){return function(){var b=this;a.on("nodechange",function(c){b.active(!a.readonly&&!!B(a,c.element))})}},R=function(a){return function(){var b=this,c=function(a){0<q.grep(a.parents,w).length?b.show():b.hide()};0<q.grep(a.dom.getParents(a.selection.getStart()),w).length||b.hide();a.on("nodechange",c);b.on("remove",function(){a.off("nodechange",c)})}};d.add("link",function(a){a.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:u(a),onpostrender:J(a)});a.addButton("unlink",
{active:!1,icon:"unlink",tooltip:"Remove link",onclick:F(a),onpostrender:J(a)});a.addContextToolbar&&a.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:I(a)});a.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:I(a),onPostRender:R(a),prependToContext:!0});a.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:u(a),stateSelector:"a[href]",context:"insert",prependToContext:!0});a.addContextToolbar&&a.addContextToolbar(P(a),"openlink | link unlink");Q(a);
a.addCommand("mceLink",u(a));a.addShortcut("Meta+K","",u(a))})}();

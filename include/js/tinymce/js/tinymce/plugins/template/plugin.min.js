var $jscomp={scope:{},findInternal:function(c,g,e){c instanceof String&&(c=String(c));for(var f=c.length,h=0;h<f;h++){var l=c[h];if(g.call(e,l,h,c))return{i:h,v:l}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[g]=e.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,g,e,f){if(g){e=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var h=c[f];h in e||(e[h]={});e=e[h]}c=c[c.length-1];f=e[c];g=g(f);g!=f&&null!=g&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6-impl","es3");
!function(){var c=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=function(a){return function(){return a}},e=(g(!1),g(!0),function(a){for(var d=Array(arguments.length-1),b=1;b<arguments.length;b++)d[b-1]=arguments[b];return function(){for(var b=Array(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];b=d.concat(b);return a.apply(null,b)}}),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.util.XHR"),l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),
p=function(a){return a.getParam("template_mdate_format",a.getLang("template.mdate_format"))},x=function(a){return Math.min(l.DOM.getViewPort().h,a.getParam("template_popup_height",500))},k=function(a,d){if((a=""+a).length<d)for(var b=0;b<d-a.length;b++)a="0"+a;return a},m=function(a,d,b){return b=b||new Date,d.replace("%D","%m/%d/%Y").replace("%r","%I:%M:%S %p").replace("%Y",""+b.getFullYear()).replace("%y",""+b.getYear()).replace("%m",k(b.getMonth()+1,2)).replace("%d",k(b.getDate(),2)).replace("%H",
""+k(b.getHours(),2)).replace("%M",""+k(b.getMinutes(),2)).replace("%S",""+k(b.getSeconds(),2)).replace("%I",""+((b.getHours()+11)%12+1)).replace("%p",12>b.getHours()?"AM":"PM").replace("%B",""+a.translate("January February March April May June July August September October November December".split(" ")[b.getMonth()])).replace("%b",""+a.translate("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[b.getMonth()])).replace("%A",""+a.translate("Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ")[b.getDay()])).replace("%a",
""+a.translate("Sun Mon Tue Wed Thu Fri Sat Sun".split(" ")[b.getDay()])).replace("%%","%")},q=function(a,d,b){return f.each(b,function(a,b){"function"==typeof a&&(a=a(b));d=d.replace(new RegExp("\\{\\$"+b+"\\}","g"),a)}),d},r=function(a,d){var b=a.dom,c=a.getParam("template_replace_values");f.each(b.select("*",d),function(a){f.each(c,function(d,f){b.hasClass(a,f)&&"function"==typeof c[f]&&c[f](a)})})},n=function(a,d){return(new RegExp("\\b"+d+"\\b","g")).test(a.className)},t=function(a,d){return function(){var b=
a.templates;"function"!=typeof b?"string"==typeof b?h.send({url:b,success:function(a){d(JSON.parse(a))}}):d(b):b(d)}},u=function(a,d,b){var c;d=a.dom;var e=a.selection.getContent();b=q(0,b,a.getParam("template_replace_values"));b=d.create("div",null,b);(c=d.select(".mceTmpl",b))&&0<c.length&&(b=d.create("div",null)).appendChild(c[0].cloneNode(!0));f.each(d.select("*",b),function(b){n(b,a.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(b.innerHTML=m(a,a.getParam("template_cdate_format",
a.getLang("template.cdate_format"))));n(b,a.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(b.innerHTML=m(a,p(a)));n(b,a.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(b.innerHTML=e)});r(a,b);a.execCommand("mceInsertContent",!1,b.innerHTML);a.addVisual()},y=function(a){a.on("PreProcess",function(c){var b=a.dom,d=p(a);f.each(b.select("div",c.node),function(c){b.hasClass(c,"mceTmpl")&&(f.each(b.select("*",c),function(c){b.hasClass(c,a.getParam("template_mdate_classes",
"mdate").replace(/\s+/g,"|"))&&(c.innerHTML=m(a,d))}),r(a,c))})})},v=function(a,c,b){if(-1===b.indexOf("<html>")){var d="";f.each(a.contentCSS,function(b){d+='<link type="text/css" rel="stylesheet" href="'+a.documentBaseURI.toAbsolute(b)+'">'});var e=a.settings.body_class||"";-1!==e.indexOf("=")&&(e=(e=a.getParam("body_class","","hash"))[a.id]||"");b="<!DOCTYPE html><html><head>"+d+'</head><body class="'+e+'">'+b+"</body></html>"}b=q(a,b,a.getParam("template_preview_replace_values"));c=c.find("iframe")[0].getEl().contentWindow.document;
c.open();c.write(b);c.close()},z=function(a,c){var b,d,e=[];c&&0!==c.length?(f.each(c,function(a){e.push({selected:!e.length,text:a.title,value:{url:a.url,content:a.content,description:a.description}})}),(b=a.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:e,onselect:function(c){var e=c.control.value();
e.url?h.send({url:e.url,success:function(c){v(a,b,d=c)}}):(d=e.content,v(a,b,d));b.find("#description")[0].text(c.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:"\u00a0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){u(a,!1,d)},minWidth:a.getParam("template_popup_width",600),minHeight:x(a)})).find("listbox")[0].fire("select")):(c=a.translate("No templates defined."),a.notificationManager.open({text:c,type:"info"}))},w=function(a){return function(c){z(a,
c)}};c.add("template",function(a){a.addButton("template",{title:"Insert template",onclick:t(a.settings,w(a))});a.addMenuItem("template",{text:"Template",onclick:t(a.settings,w(a)),icon:"template",context:"insert"});a.addCommand("mceInsertTemplate",e(u,a));y(a)})}();
